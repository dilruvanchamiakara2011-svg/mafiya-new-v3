<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>CYBER SIGN UP</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Inter:wght@400;500&display=swap" rel="stylesheet">

<style>
/* Background Effects */
body{
  margin:0;
  min-height:100vh;
  display:flex;
  justify-content:center;
  align-items:center;
  background:#0a0a1a;
  font-family:'Inter',sans-serif;
  color:#fff;
  position:relative;
  overflow:hidden;
}

.cyber-bg {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background: 
    radial-gradient(circle at 20% 50%, rgba(0,255,136,0.1) 0%, transparent 50%),
    radial-gradient(circle at 80% 20%, rgba(0,170,255,0.1) 0%, transparent 50%);
  z-index:-2;
}

.grid-overlay {
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:100%;
  background-image: 
    linear-gradient(rgba(0,255,136,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0,255,136,0.03) 1px, transparent 1px);
  background-size:40px 40px;
  z-index:-1;
  opacity:0.4;
}

/* Cyber Card */
.card{
  width:100%;
  max-width:420px;
  background:rgba(15,20,35,.95);
  padding:40px 35px;
  border-radius:20px;
  border:1px solid rgba(0,255,136,.3);
  box-shadow:0 0 40px rgba(0,255,136,.2),
             inset 0 1px 0 rgba(255,255,255,.1);
  backdrop-filter:blur(12px);
  position:relative;
  overflow:hidden;
  animation:cardAppear 0.8s ease-out;
}

@keyframes cardAppear {
  from {
    opacity:0;
    transform:translateY(30px) scale(0.95);
  }
  to {
    opacity:1;
    transform:translateY(0) scale(1);
  }
}

.card::before {
  content:'';
  position:absolute;
  top:-2px;
  left:-2px;
  right:-2px;
  bottom:-2px;
  background:linear-gradient(45deg, 
    #00ff88, #00aaff, #0088ff, #00ff88);
  border-radius:22px;
  z-index:-1;
  opacity:0.3;
  animation:borderRotate 4s linear infinite;
}

@keyframes borderRotate {
  0% { filter:hue-rotate(0deg); }
  100% { filter:hue-rotate(360deg); }
}

/* Header */
h1{
  font-family:'Orbitron',sans-serif;
  text-align:center;
  margin-bottom:30px;
  background:linear-gradient(90deg,#00ff88,#00aaff,#00ff88);
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
  font-size:2.5rem;
  letter-spacing:4px;
  text-shadow:0 0 20px rgba(0,255,136,0.3);
  animation:titleGlow 2s ease-in-out infinite alternate;
}

@keyframes titleGlow {
  0% { filter:brightness(1); }
  100% { filter:brightness(1.4); }
}

.subtitle{
  text-align:center;
  color:rgba(255,255,255,0.6);
  font-size:0.9rem;
  letter-spacing:2px;
  margin-bottom:30px;
  font-family:'Orbitron',sans-serif;
}

/* Input Fields */
.input-group {
  position:relative;
  margin-bottom:20px;
}

input{
  width:95%;
  padding:16px 20px;
  margin-bottom:0;
  border-radius:12px;
  border:2px solid rgba(0,255,136,.3);
  background:rgba(0,0,0,.4);
  color:#fff;
  outline:none;
  font-family:'Inter',sans-serif;
  font-size:1rem;
  transition:all 0.3s ease;
}

input:focus {
  border-color:#00ff88;
  box-shadow:0 0 20px rgba(0,255,136,.3);
  background:rgba(0,0,0,.6);
}

.placeholder-label {
  position:absolute;
  left:20px;
  top:16px;
  color:rgba(255,255,255,.6);
  pointer-events:none;
  transition:all 0.3s ease;
  font-size:0.9rem;
  font-family:'Orbitron',sans-serif;
  letter-spacing:1px;
}

input:focus + .placeholder-label,
input:not(:placeholder-shown) + .placeholder-label {
  top:-10px;
  left:15px;
  font-size:0.75rem;
  color:#00ff88;
  background:rgba(15,20,35,.95);
  padding:0 8px;
  text-shadow:0 0 8px rgba(0,255,136,.5);
}

/* Password Toggle */
.password-wrapper {
  position:relative;
}

.toggle-password {
  position:absolute;
  right:15px;
  top:50%;
  transform:translateY(-50%);
  background:none;
  border:none;
  color:rgba(0,255,136,.7);
  cursor:pointer;
  font-size:0.9rem;
  padding: 0.5px;
  transition:all 0.3s ease;
}

.toggle-password:hover {
  color:#00ff88;
  transform:translateY(-50%) scale(1.1);
}

/* Button */
button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:12px;
  cursor:pointer;
  font-family:'Orbitron',sans-serif;
  letter-spacing:3px;
  font-size:1.1rem;
  font-weight:700;
  background:linear-gradient(90deg,#00ff88,#00aaff);
  color:#000;
  margin-top:10px;
  transition:all 0.3s ease;
  position:relative;
  overflow:hidden;
}

button::before {
  content:'';
  position:absolute;
  top:0;
  left:-100%;
  width:100%;
  height:100%;
  background:linear-gradient(90deg, 
    transparent, 
    rgba(255,255,255,.3), 
    transparent);
  transition:0.5s;
}

button:hover::before {
  left:100%;
}

button:hover{
  box-shadow:0 0 30px rgba(0,255,136,.6);
  transform:translateY(-3px);
}

button:active {
  transform:translateY(-1px);
}

button:disabled {
  opacity:0.6;
  cursor:not-allowed;
  transform:none !important;
}

/* Loading Spinner */
.loading {
  display:inline-block;
  width:20px;
  height:20px;
  border:3px solid rgba(0,255,136,.3);
  border-top-color:#00ff88;
  border-radius:50%;
  animation:spin 1s linear infinite;
  vertical-align:middle;
  margin-right:10px;
}

@keyframes spin {
  to { transform:rotate(360deg); }
}

/* Message */
.message{
  margin-top:20px;
  text-align:center;
  font-size:0.9rem;
  padding:12px 15px;
  border-radius:10px;
  opacity:0;
  transform:translateY(10px);
  transition:all 0.3s ease;
  font-family:'Orbitron',sans-serif;
  letter-spacing:1px;
}

.message.show {
  opacity:1;
  transform:translateY(0);
}

.message.success{
  color:#00ff88;
  background:rgba(0,255,136,.1);
  border:1px solid rgba(0,255,136,.3);
}

.message.error{
  color:#ff5555;
  background:rgba(255,85,85,.1);
  border:1px solid rgba(255,85,85,.3);
}

/* Footer */
.login-link {
  text-align:center;
  margin-top:25px;
  padding-top:20px;
  border-top:1px solid rgba(0,255,136,.1);
}

.login-link a {
  color:#00aaff;
  text-decoration:none;
  font-family:'Orbitron',sans-serif;
  font-size:0.9rem;
  letter-spacing:2px;
  transition:all 0.3s ease;
  position:relative;
}

.login-link a::after {
  content:'';
  position:absolute;
  bottom:-2px;
  left:0;
  width:0;
  height:1px;
  background:#00aaff;
  transition:width 0.3s ease;
}

.login-link a:hover {
  color:#00ff88;
}

.login-link a:hover::after {
  width:100%;
}

/* Responsive */
@media (max-width:480px) {
  .card {
    margin:20px;
    padding:30px 25px;
  }
  
  h1 {
    font-size:2rem;
    letter-spacing:2px;
  }
  
  input {
    padding:14px;
  }
}

/* Shake animation */
@keyframes shake {
  0%, 100% { transform:translateX(0); }
  10%, 30%, 50%, 70%, 90% { transform:translateX(-5px); }
  20%, 40%, 60%, 80% { transform:translateX(5px); }
}

.shake {
  animation:shake 0.5s ease;
}
</style>
</head>

<body>
<div class="cyber-bg"></div>
<div class="grid-overlay"></div>

<div class="card">
  <h1>SIGN UP</h1>
  <p class="subtitle">JOIN THE CYBER NETWORK</p>

  <div class="input-group">
    <input type="text" id="username" placeholder=" ">
    <label class="placeholder-label">USERNAME</label>
  </div>
  
  <div class="input-group">
    <input type="email" id="email" placeholder=" ">
    <label class="placeholder-label">EMAIL</label>
  </div>
  
  <div class="input-group password-wrapper">
    <input type="password" id="password" placeholder=" ">
    <label class="placeholder-label">PASSWORD</label>
    <button type="button" class="toggle-password" id="togglePassword">
      üëÅÔ∏è
    </button>
  </div>

  <div class="input-group">
    <input
      type="text"
      id="accid"
      placeholder=" "
      inputmode="numeric"
      pattern="[0-9]*"
      oninput="this.value = this.value.replace(/[^0-9]/g, '')"
    >
    <label class="placeholder-label">ACCOUNT ID (NUMBERS ONLY)</label>
  </div>

  <button onclick="signup()" id="signupBtn">
    <span id="btnText">SIGN UP</span>
    <span id="btnLoading" class="loading" style="display:none;"></span>
  </button>

  <div class="message" id="msg"></div>

  <div class="login-link">
    <a href="login.html">ALREADY HAVE AN ACCOUNT? LOGIN ‚Üí</a>
  </div>
</div>

<!-- üî• FIREBASE SCRIPT -->
<script type="module">
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
import {
  getFirestore,
  doc,
  setDoc,
  getDoc
} from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

// ‚úÖ YOUR FIREBASE CONFIG
const firebaseConfig = {
  apiKey: "AIzaSyDW-hB0B-sdrIGI7Uf0Pl2CgfIV5R4X9hY",
  authDomain: "mafiya-new-data-base.firebaseapp.com",
  projectId: "mafiya-new-data-base",
  storageBucket: "mafiya-new-data-base.firebasestorage.app",
  messagingSenderId: "87239991760",
  appId: "1:87239991760:web:89ca5f8e07ffb8f8fb19d5"
};

// Init Firebase
const app = initializeApp(firebaseConfig);
const db = getFirestore(app);

// DOM Elements
const usernameInput = document.getElementById("username");
const emailInput = document.getElementById("email");
const passwordInput = document.getElementById("password");
const accidInput = document.getElementById("accid");
const togglePasswordBtn = document.getElementById("togglePassword");
const signupBtn = document.getElementById("signupBtn");
const btnText = document.getElementById("btnText");
const btnLoading = document.getElementById("btnLoading");
const msg = document.getElementById("msg");

// Toggle Password Visibility
let passwordVisible = false;
togglePasswordBtn.addEventListener("click", () => {
  passwordVisible = !passwordVisible;
  passwordInput.type = passwordVisible ? "text" : "password";
  togglePasswordBtn.textContent = passwordVisible ? "üëÅÔ∏è‚Äçüó®Ô∏è" : "üëÅÔ∏è";
});

// Signup function
window.signup = async function () {
  const username = usernameInput.value.trim();
  const email = emailInput.value.trim();
  const password = passwordInput.value;
  const accid = accidInput.value.trim();

  // Clear previous message
  msg.textContent = "";
  msg.className = "message";

  // Validations
  if (!username || !email || !password || !accid) {
    showMessage("Fill all fields ‚ùå", "error");
    shakeElement(usernameInput);
    shakeElement(emailInput);
    shakeElement(passwordInput);
    shakeElement(accidInput);
    return;
  }

  if (!/^[0-9]+$/.test(accid)) {
    showMessage("Account ID numbers only ‚ùå", "error");
    shakeElement(accidInput);
    return;
  }

  if (password.length < 6) {
    showMessage("Password must be at least 6 characters ‚ùå", "error");
    shakeElement(passwordInput);
    return;
  }

  // Show loading state
  signupBtn.disabled = true;
  btnText.textContent = "PROCESSING";
  btnLoading.style.display = "inline-block";

  try {
    // üîç check ACCID exists
    const userRef = doc(db, "users", accid);
    const snap = await getDoc(userRef);

    if (snap.exists()) {
      showMessage("Account ID already exists ‚ùå", "error");
      shakeElement(accidInput);
      return;
    }

    // üåê get file origin / IP info
    const origin = window.location.origin;   // file:// or domain
    const userAgent = navigator.userAgent;

    // üíæ save user at users/{ACCID}
    await setDoc(userRef, {
      accid,
      username,
      email,
      password, // demo only ‚ö†Ô∏è
      origin,
      userAgent,
      createdAt: new Date().toISOString()
    });

    showMessage("Signup successful! ‚úÖ", "success");

    // remember login (home page buttons hide)
    localStorage.setItem("user", JSON.stringify({
      accid,
      username,
      email
    }));

    // Clear form
    usernameInput.value = "";
    emailInput.value = "";
    passwordInput.value = "";
    accidInput.value = "";

    // Redirect to home
    setTimeout(() => {
      window.location.href = "/";
    }, 1500);

  } catch(e) {
    console.error(e);
    showMessage("Database error ‚ùå", "error");
  } finally {
    // Reset button state
    signupBtn.disabled = false;
    btnText.textContent = "SIGN UP";
    btnLoading.style.display = "none";
  }
}

// Helper Functions
function showMessage(text, type) {
  msg.textContent = text;
  msg.className = `message ${type} show`;
  
  // Auto-hide error messages after 5 seconds
  if (type === "error") {
    setTimeout(() => {
      msg.className = "message";
      msg.textContent = "";
    }, 5000);
  }
}

function shakeElement(element) {
  element.classList.remove('shake');
  void element.offsetWidth; // Trigger reflow
  element.classList.add('shake');
  
  // Remove shake class after animation
  setTimeout(() => {
    element.classList.remove('shake');
  }, 500);
}

// Enter key support
document.addEventListener("keypress", (e) => {
  if (e.key === "Enter") {
    window.signup();
  }
});

// Input focus effects
document.querySelectorAll("input").forEach(input => {
  input.addEventListener("focus", function() {
    this.parentElement.classList.add("focused");
  });
  
  input.addEventListener("blur", function() {
    this.parentElement.classList.remove("focused");
  });
});

// Input validation for accid
accidInput.addEventListener("input", function() {
  this.value = this.value.replace(/[^0-9]/g, '');
});

//bux fix 
localStorage.removeItem("cyberUser")

<form id="signupForm">
  <input type="text" required>
  <input type="password" required>
  <button type="submit">SIGN UP</button>
</form>

  // re connect home page 
document.getElementById("signupForm").addEventListener("submit", function(e){
  e.preventDefault();

  // validation ok after signup
  localStorage.setItem("cyberUser", "true");

  window.location.href = "/";
});

</script>
</body>
</html>
